@namespace Poke.MoveTranslator.PWA.Components
@using Newtonsoft.Json
@inherits MoveTranslatorBase

@if (!IsInitializing)
{
    <MudForm>
        <MudGrid Justify="@Justify.Center">
            @if (LastValues.Count > 0)
            {
                <MudItem xs="12">
                    <MudText>Last moves</MudText>
                    <MudChipSet AllClosable="true" Style="overflow-x: auto;white-space: nowrap">
                        @foreach (NameByLanguage item in LastValues)
                        {
                            <MudChip Text="@item.Name" OnClick="@(() => OnLastValueClick(item))" OnClose="@(() => LastValues.Remove(item))"/>
                        }
                    </MudChipSet>
                </MudItem>
            }

            <MudItem xs="12" sm="6" md="2">
                <MudTextField @bind-Value="MoveName" Label="Move name" Variant="Variant.Text" Disabled="@IsLoading"></MudTextField>
            </MudItem>
            <MudItem xs="12" sm="6" md="6">
                <MudSelect T="string" @bind-Value="Language" Label="Language" AnchorOrigin="Origin.BottomCenter" Disabled="@IsLoading">
                    @foreach (string languageCode in languages.Keys)
                    {
                        <MudSelectItem Value="@languageCode">@(languages[languageCode])</MudSelectItem>
                    }
                </MudSelect>
            </MudItem>
            <MudItem xs="12" sm="6" md="4">
                <MudFab Color="Color.Primary" Icon="@Icons.Material.Filled.PlayCircleFilled" aria-label="play" OnClick="@LoadMove" Class="ml-auto d-flex d-sm-inline-flex" Disabled="IsButtonDisabled"/>
            </MudItem>
        </MudGrid>
    </MudForm>
}

@if (IsLoading || IsInitializing)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true"/>
}
else if (Move != null)
{
    <div>English Name: @Move.Names.First(n => n.Language.Name == "en").Name</div>
}